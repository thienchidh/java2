package controls;

import java.util.LinkedHashMap;
import java.util.LinkedHashSet;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Scanner;
import java.util.Set;

import model.Employee;
import model.Organization;

public class MySystemManager {

	private static class Singleton {
		private static MySystemManager instance = new MySystemManager();
	}

	public static MySystemManager getInstance() {
		return Singleton.instance;
	}

	private Set<Employee> employees;
	private Map<String, Organization> organizations;

	private Scanner sc = new Scanner(System.in);

	private MySystemManager() {
		super();
		employees = new LinkedHashSet<>();
		organizations = new LinkedHashMap<>();
	}

	private void getAllEmp() {
		for (Employee employee : employees) {
			System.out.println(employee);
		}
	}

	private void getAllOrg() {
		for (Entry<String, Organization> e : organizations.entrySet()) {
			System.out.println(e.getValue());
		}
	}

	private void handle(int choiceId) {
		/*
		 * System.out.println("1. Display all Employees");
		 * System.out.println("2. Display all Organizations");
		 * System.out.println("3. Create new Organization");
		 * System.out.println("4. Create new Employee"); System.out.println("0. exit");
		 */

		switch (choiceId) {
		case 0:
			System.exit(0);
			break;
		case 1:
			getAllEmp();
			break;
		case 2:
			getAllOrg();
			break;
		case 3:
			makeNewOrg();
			break;
		case 4:
			makeNewEmp();

		default:
			System.out.println("???");
		}

	}

	private void makeNewEmp() {
		String name = sc.nextLine();
		String sex = sc.nextLine();
		String jobTitle = sc.nextLine();
		String orgName = sc.nextLine();
		if (!organizations.containsKey(orgName)) {
			System.out.println("Organization " + name + " not already exists!");
		}
		String birthDay = sc.nextLine();

	}

	private void makeNewOrg() {
		String name = sc.nextLine();
		Organization org = new Organization(name);
		boolean isAddSuccess = organizations.put(name, org) != null;
		if (isAddSuccess) {
			System.out.println("Add Organization " + name + ": success!");
		} else {
			System.out.println("Organization " + name + " already exists!");
		}
	}

	public void run() {
		while (true) {
			showMenu();
			int choiceId = Integer.parseInt(sc.nextLine());
			handle(choiceId);
		}
	}

	private void showMenu() {
		System.out.println("1. Display all Employees");
		System.out.println("2. Display all Organizations");
		System.out.println("3. Create new Employee");
		System.out.println("4. Create new Organization");
		System.out.println("0. exit");
		System.out.println("> ");
	}

}
